{% block content %}
<h2>إنشاء منشور جديد</h2>

<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    
    <label for="post_type">نوع المنشور:</label>
    <select name="post_type" id="post_type" onchange="toggleForm()">
        <option value="general">📄 منشور عادي</option>
        <option value="job">💼 منشور وظيفي</option>
    </select>

    <!-- إدخال الحقول -->
    <div id="form_fields">
        {{ form.as_p }}
        <button type="submit">نشر</button>
    </div>
</form>

<!-- إظهار الحقول الوظيفية فقط عند اختيار "وظيفة" -->
<script>
    function toggleForm() {
        let postType = document.getElementById("post_type").value;
        let jobFields = document.querySelectorAll('[name="job_title"], [name="company_name"], [name="job_description"], [name="job_file"]');

        jobFields.forEach(field => {
            field.closest("p").style.display = (postType === "job") ? "block" : "none";
        });
    }

    document.addEventListener("DOMContentLoaded", toggleForm);
</script>
{% endblock %}
